<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Joseph's Path to Glory</title>
    <style>
        /**
         * Joseph's Path to Glory - v1.0
         * Date: 2025-11-17
         *
         * Features:
         * - School database (localStorage)
         * - Manual CRUD operations
         * - Export/Import backup
         * - Mobile-first responsive design
         * - Dark mode theme
         *
         * UTF-8 Encoding: Yes (emojis: üèàüìäüí∞)
         * Dependencies: None (vanilla JS)
         */

        /* ===== CSS VARIABLES (Dark Mode Theme) ===== */
        :root {
            --color-bg-primary: #0a1628;
            --color-bg-secondary: #1a2942;
            --color-bg-tertiary: #2a3a52;
            --color-accent-primary: #00d4ff;
            --color-accent-secondary: #ffd700;
            --color-text-primary: #ffffff;
            --color-text-secondary: #b0c4de;
            --color-text-muted: #6b7c93;
            --color-border: #3a4a62;
            --color-success: #4ade80;
            --color-warning: #fbbf24;
            --color-danger: #f87171;
            --color-info: #60a5fa;

            --font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            --border-radius: 8px;
            --transition: all 0.2s ease;
        }

        /* ===== RESET & BASE STYLES ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-family);
            background: var(--color-bg-primary);
            color: var(--color-text-primary);
            line-height: 1.6;
            min-height: 100vh;
            padding-bottom: 80px; /* Space for mobile nav */
        }

        /* ===== TYPOGRAPHY ===== */
        h1 {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
        }

        h2 {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 0.75rem;
        }

        h3 {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        /* ===== LAYOUT CONTAINERS ===== */
        .container {
            max-width: 480px;
            margin: 0 auto;
            padding: 1rem;
        }

        .view {
            display: none;
        }

        .view.active {
            display: block;
        }

        /* ===== HEADER ===== */
        .app-header {
            background: var(--color-bg-secondary);
            padding: 1rem;
            border-bottom: 2px solid var(--color-accent-primary);
            margin-bottom: 1rem;
        }

        .app-title {
            font-size: 1.5rem;
            text-align: center;
            background: linear-gradient(135deg, var(--color-accent-primary), var(--color-accent-secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* ===== BUTTONS ===== */
        .btn {
            display: inline-block;
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: var(--border-radius);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            min-height: 44px;
            text-align: center;
            text-decoration: none;
        }

        .btn-primary {
            background: var(--color-accent-primary);
            color: var(--color-bg-primary);
        }

        .btn-primary:hover {
            background: #00b8e6;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: var(--color-bg-tertiary);
            color: var(--color-text-primary);
            border: 1px solid var(--color-border);
        }

        .btn-secondary:hover {
            background: var(--color-bg-secondary);
        }

        .btn-danger {
            background: var(--color-danger);
            color: white;
        }

        .btn-danger:hover {
            background: #dc2626;
        }

        .btn-success {
            background: var(--color-success);
            color: var(--color-bg-primary);
        }

        .btn-block {
            width: 100%;
            display: block;
        }

        .btn-group {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }

        .btn-group .btn {
            flex: 1;
        }

        /* ===== FORMS ===== */
        .form-group {
            margin-bottom: 1rem;
        }

        label {
            display: block;
            margin-bottom: 0.25rem;
            color: var(--color-text-secondary);
            font-size: 0.9rem;
            font-weight: 500;
        }

        input[type="text"],
        input[type="email"],
        input[type="tel"],
        input[type="date"],
        input[type="password"],
        select,
        textarea {
            width: 100%;
            padding: 0.75rem;
            background: var(--color-bg-tertiary);
            border: 1px solid var(--color-border);
            border-radius: var(--border-radius);
            color: var(--color-text-primary);
            font-size: 1rem;
            font-family: var(--font-family);
            min-height: 44px;
        }

        input:focus,
        select:focus,
        textarea:focus {
            outline: none;
            border-color: var(--color-accent-primary);
            box-shadow: 0 0 0 3px rgba(0, 212, 255, 0.1);
        }

        textarea {
            resize: vertical;
            min-height: 100px;
        }

        /* ===== SCHOOL CARDS ===== */
        .school-grid {
            display: grid;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .school-card {
            background: var(--color-bg-secondary);
            border: 1px solid var(--color-border);
            border-radius: var(--border-radius);
            padding: 1rem;
            cursor: pointer;
            transition: var(--transition);
        }

        .school-card:hover {
            border-color: var(--color-accent-primary);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 212, 255, 0.2);
        }

        .school-card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .school-name {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--color-text-primary);
        }

        .school-rating {
            background: var(--color-accent-secondary);
            color: var(--color-bg-primary);
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-weight: 700;
            font-size: 0.9rem;
        }

        .school-meta {
            color: var(--color-text-secondary);
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
        }

        .school-badge {
            display: inline-block;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-right: 0.5rem;
        }

        .badge-juco { background: var(--color-info); color: white; }
        .badge-d1 { background: var(--color-success); color: white; }
        .badge-d2 { background: var(--color-warning); color: var(--color-bg-primary); }
        .badge-d3 { background: var(--color-accent-secondary); color: var(--color-bg-primary); }
        .badge-naia { background: var(--color-text-muted); color: white; }

        .badge-target { background: var(--color-success); color: white; }
        .badge-safety { background: var(--color-info); color: white; }
        .badge-reach { background: var(--color-warning); color: var(--color-bg-primary); }

        .school-action {
            color: var(--color-text-muted);
            font-size: 0.85rem;
            margin-top: 0.5rem;
            padding-top: 0.5rem;
            border-top: 1px solid var(--color-border);
        }

        /* ===== FILTERS & SEARCH ===== */
        .controls {
            margin-bottom: 1.5rem;
        }

        .filter-group {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 0.5rem 1rem;
            background: var(--color-bg-tertiary);
            border: 1px solid var(--color-border);
            border-radius: 20px;
            color: var(--color-text-secondary);
            font-size: 0.9rem;
            cursor: pointer;
            transition: var(--transition);
        }

        .filter-btn.active {
            background: var(--color-accent-primary);
            color: var(--color-bg-primary);
            border-color: var(--color-accent-primary);
        }

        .search-box {
            position: relative;
            margin-bottom: 1rem;
        }

        .search-box input {
            padding-left: 2.5rem;
        }

        .search-icon {
            position: absolute;
            left: 0.75rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--color-text-muted);
        }

        /* ===== STATS ===== */
        .stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 0.5rem;
            margin-bottom: 1.5rem;
        }

        .stat-card {
            background: var(--color-bg-secondary);
            border: 1px solid var(--color-border);
            border-radius: var(--border-radius);
            padding: 0.75rem;
            text-align: center;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--color-accent-primary);
        }

        .stat-label {
            font-size: 0.8rem;
            color: var(--color-text-muted);
            margin-top: 0.25rem;
        }

        /* ===== TABS ===== */
        .tabs {
            display: flex;
            border-bottom: 2px solid var(--color-border);
            margin-bottom: 1rem;
            overflow-x: auto;
        }

        .tab-btn {
            padding: 0.75rem 1rem;
            background: none;
            border: none;
            color: var(--color-text-secondary);
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: var(--transition);
            white-space: nowrap;
        }

        .tab-btn.active {
            color: var(--color-accent-primary);
            border-bottom-color: var(--color-accent-primary);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* ===== RATINGS ===== */
        .rating-group {
            margin-bottom: 1rem;
        }

        .rating-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .rating-label {
            color: var(--color-text-secondary);
            font-size: 0.9rem;
        }

        .stars {
            display: flex;
            gap: 0.25rem;
        }

        .star {
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--color-text-muted);
            transition: var(--transition);
        }

        .star.filled {
            color: var(--color-accent-secondary);
        }

        .overall-rating {
            background: var(--color-bg-tertiary);
            border: 2px solid var(--color-accent-primary);
            border-radius: var(--border-radius);
            padding: 1rem;
            text-align: center;
            margin-bottom: 1rem;
        }

        .overall-rating .value {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--color-accent-secondary);
        }

        .overall-rating .label {
            color: var(--color-text-secondary);
            font-size: 0.9rem;
        }

        /* ===== CONTACT/ACTION HISTORY ===== */
        .history-item {
            background: var(--color-bg-tertiary);
            border: 1px solid var(--color-border);
            border-radius: var(--border-radius);
            padding: 1rem;
            margin-bottom: 0.75rem;
        }

        .history-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .history-date {
            color: var(--color-text-muted);
            font-size: 0.85rem;
        }

        .history-method {
            background: var(--color-accent-primary);
            color: var(--color-bg-primary);
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .history-notes {
            color: var(--color-text-secondary);
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
        }

        .history-actions {
            display: flex;
            gap: 0.5rem;
        }

        .btn-small {
            padding: 0.25rem 0.75rem;
            font-size: 0.8rem;
            min-height: auto;
        }

        /* ===== MODAL ===== */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            overflow-y: auto;
            padding: 1rem;
        }

        .modal.active {
            display: flex;
            align-items: flex-start;
            justify-content: center;
            padding-top: 2rem;
        }

        .modal-content {
            background: var(--color-bg-primary);
            border: 1px solid var(--color-border);
            border-radius: var(--border-radius);
            max-width: 600px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            margin: auto;
        }

        .modal-header {
            padding: 1rem;
            border-bottom: 1px solid var(--color-border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title {
            font-size: 1.25rem;
            font-weight: 600;
        }

        .modal-close {
            background: none;
            border: none;
            color: var(--color-text-muted);
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-body {
            padding: 1rem;
        }

        .modal-footer {
            padding: 1rem;
            border-top: 1px solid var(--color-border);
            display: flex;
            gap: 0.5rem;
            justify-content: flex-end;
        }

        /* ===== BOTTOM NAVIGATION (Mobile) ===== */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: var(--color-bg-secondary);
            border-top: 2px solid var(--color-accent-primary);
            display: flex;
            justify-content: space-around;
            padding: 0.5rem;
            z-index: 100;
        }

        .nav-btn {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 0.5rem;
            background: none;
            border: none;
            color: var(--color-text-muted);
            font-size: 0.8rem;
            cursor: pointer;
            transition: var(--transition);
        }

        .nav-btn.active {
            color: var(--color-accent-primary);
        }

        .nav-icon {
            font-size: 1.5rem;
            margin-bottom: 0.25rem;
        }

        /* ===== EMPTY STATE ===== */
        .empty-state {
            text-align: center;
            padding: 3rem 1rem;
            color: var(--color-text-muted);
        }

        .empty-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            opacity: 0.5;
        }

        .empty-message {
            font-size: 1.1rem;
            margin-bottom: 1.5rem;
        }

        /* ===== UTILITY CLASSES ===== */
        .text-center { text-align: center; }
        .text-muted { color: var(--color-text-muted); }
        .text-success { color: var(--color-success); }
        .text-warning { color: var(--color-warning); }
        .text-danger { color: var(--color-danger); }
        .mb-1 { margin-bottom: 0.5rem; }
        .mb-2 { margin-bottom: 1rem; }
        .mt-1 { margin-top: 0.5rem; }
        .mt-2 { margin-top: 1rem; }
        .hidden { display: none; }

        /* ===== DESKTOP NAV (Hidden on Mobile) ===== */
        .desktop-nav {
            display: none;
        }

        /* ===== RESPONSIVE (Desktop) ===== */
        @media (min-width: 768px) {
            .container {
                max-width: 1200px;
                padding: 2rem;
            }

            .school-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .bottom-nav {
                display: none;
            }

            body {
                padding-bottom: 0;
            }

            .app-header {
                margin-bottom: 2rem;
            }

            .desktop-nav {
                display: flex;
                justify-content: center;
                gap: 1rem;
                margin-top: 1rem;
            }
        }

        @media (min-width: 1024px) {
            .school-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }
    </style>
</head>
<body>
    <!-- App Header -->
    <div class="app-header">
        <h1 class="app-title">üèà Joseph's Path to Glory</h1>
        <div class="desktop-nav">
            <button class="btn btn-secondary nav-btn" data-view="dashboard">Dashboard</button>
            <button class="btn btn-secondary nav-btn" data-view="actions">Actions</button>
            <button class="btn btn-secondary nav-btn" data-view="settings">Settings</button>
        </div>
    </div>

    <!-- Main Container -->
    <div class="container">
        <!-- DASHBOARD VIEW -->
        <div id="dashboard-view" class="view active">
            <div class="btn-group">
                <button class="btn btn-primary" onclick="App.UI.showAddSchoolModal()">+ Add School</button>
                <button class="btn btn-secondary" onclick="App.UI.showView('research')">ü§ñ Research with AI</button>
            </div>

            <!-- Stats -->
            <div class="stats">
                <div class="stat-card">
                    <div class="stat-value" id="stat-total">0</div>
                    <div class="stat-label">Schools</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="stat-offers">0</div>
                    <div class="stat-label">Offers</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="stat-priority">0</div>
                    <div class="stat-label">Priority</div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls">
                <!-- Search -->
                <div class="search-box">
                    <span class="search-icon">üîç</span>
                    <input type="text" id="search-input" placeholder="Search schools...">
                </div>

                <!-- Filter by Level -->
                <div class="filter-group">
                    <button class="filter-btn active" data-filter="all">All</button>
                    <button class="filter-btn" data-filter="JUCO">JUCO</button>
                    <button class="filter-btn" data-filter="D1">D1</button>
                    <button class="filter-btn" data-filter="D2">D2</button>
                    <button class="filter-btn" data-filter="D3">D3</button>
                    <button class="filter-btn" data-filter="NAIA">NAIA</button>
                </div>

                <!-- Sort -->
                <div class="form-group">
                    <label for="sort-select">Sort by</label>
                    <select id="sort-select">
                        <option value="interest">Interest Level</option>
                        <option value="rating">Overall Rating</option>
                        <option value="date">Date Added</option>
                        <option value="name">School Name</option>
                    </select>
                </div>
            </div>

            <!-- School Grid -->
            <div id="school-grid" class="school-grid">
                <!-- School cards will be rendered here -->
            </div>

            <!-- Empty State -->
            <div id="empty-state" class="empty-state hidden">
                <div class="empty-icon">üèà</div>
                <div class="empty-message">No schools in your tracker yet</div>
                <button class="btn btn-primary" onclick="App.UI.showAddSchoolModal()">Add Your First School</button>
            </div>
        </div>

        <!-- RESEARCH VIEW -->
        <div id="research-view" class="view">
            <button class="btn btn-secondary mb-2" onclick="App.UI.showView('dashboard')">‚Üê Back to Dashboard</button>

            <h2>ü§ñ Research School with AI</h2>
            <p class="text-muted mb-2">Enter a school name to get comprehensive recruiting analysis powered by Claude AI.</p>

            <!-- Search Form -->
            <div class="form-group">
                <label for="research-input">School Name</label>
                <input type="text" id="research-input" placeholder="e.g., Iowa Western Community College, Quincy University">
                <small class="text-muted">Examples: "Iowa Western CC", "Coffeyville Community College", "Hutchinson CC"</small>
            </div>

            <button class="btn btn-primary btn-block mb-2" onclick="App.API.researchSchool()">
                üîç Research School
            </button>

            <!-- Loading State -->
            <div id="research-loading" class="hidden" style="text-align: center; padding: 2rem;">
                <div style="font-size: 3rem; margin-bottom: 1rem;">‚è≥</div>
                <p>Researching school with Claude AI...</p>
                <p class="text-muted">This may take 10-30 seconds</p>
            </div>

            <!-- Error State -->
            <div id="research-error" class="hidden" style="background: var(--color-bg-secondary); border: 1px solid var(--color-danger); border-radius: var(--border-radius); padding: 1rem; margin-top: 1rem;">
                <h3 style="color: var(--color-danger);">‚ö†Ô∏è Error</h3>
                <p id="research-error-message"></p>
            </div>

            <!-- Results -->
            <div id="research-results" class="hidden">
                <div class="btn-group mb-2">
                    <button class="btn btn-success" onclick="App.API.saveResearchedSchool()">üíæ Save to Tracker</button>
                    <button class="btn btn-secondary" onclick="App.API.clearResearch()">üîÑ Research Another</button>
                </div>

                <div id="research-results-content">
                    <!-- Results will be rendered here -->
                </div>
            </div>
        </div>

        <!-- DETAIL VIEW -->
        <div id="detail-view" class="view">
            <button class="btn btn-secondary mb-2" onclick="App.UI.showView('dashboard')">‚Üê Back to Dashboard</button>

            <div id="detail-content">
                <!-- Detail content will be rendered here -->
            </div>
        </div>

        <!-- ACTIONS VIEW -->
        <div id="actions-view" class="view">
            <h2>All Actions</h2>
            <div id="actions-content">
                <!-- Actions will be rendered here -->
            </div>
        </div>

        <!-- SETTINGS VIEW -->
        <div id="settings-view" class="view">
            <h2>Settings</h2>

            <div class="form-group">
                <label for="api-key-input">Claude API Key (for AI Research - Phase 2)</label>
                <input type="password" id="api-key-input" placeholder="sk-ant-...">
                <small class="text-muted">Stored locally in your browser. Never shared.</small>
            </div>

            <div class="btn-group">
                <button class="btn btn-success" onclick="App.Storage.exportData()">üì• Export Data</button>
                <button class="btn btn-secondary" onclick="document.getElementById('import-file').click()">üì§ Import Data</button>
            </div>
            <input type="file" id="import-file" accept=".json" style="display: none;" onchange="App.Storage.importData(event)">

            <div class="form-group mt-2">
                <button class="btn btn-danger btn-block" onclick="App.Storage.clearAllData()">üóëÔ∏è Clear All Data</button>
                <small class="text-muted">Warning: This will delete all schools. Export first!</small>
            </div>
        </div>
    </div>

    <!-- Bottom Navigation (Mobile) -->
    <nav class="bottom-nav">
        <button class="nav-btn active" data-view="dashboard">
            <span class="nav-icon">üìä</span>
            <span>Dashboard</span>
        </button>
        <button class="nav-btn" data-view="actions">
            <span class="nav-icon">‚úì</span>
            <span>Actions</span>
        </button>
        <button class="nav-btn" data-view="settings">
            <span class="nav-icon">‚öôÔ∏è</span>
            <span>Settings</span>
        </button>
    </nav>

    <!-- ADD/EDIT SCHOOL MODAL -->
    <div id="school-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="modal-title">Add School</h2>
                <button class="modal-close" onclick="App.UI.closeModal('school-modal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="school-form">
                    <input type="hidden" id="form-school-id">

                    <div class="form-group">
                        <label for="form-school-name">School Name *</label>
                        <input type="text" id="form-school-name" required>
                    </div>

                    <div class="form-group">
                        <label for="form-level">Level *</label>
                        <select id="form-level" required>
                            <option value="">Select level...</option>
                            <option value="JUCO">JUCO</option>
                            <option value="D1">D1</option>
                            <option value="D2">D2</option>
                            <option value="D3">D3</option>
                            <option value="NAIA">NAIA</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="form-location">Location *</label>
                        <input type="text" id="form-location" placeholder="City, State" required>
                    </div>

                    <div class="form-group">
                        <label for="form-conference">Conference</label>
                        <input type="text" id="form-conference" placeholder="e.g., KJCCC, ICCAC">
                    </div>

                    <h3 class="mt-2 mb-1">Coaching Staff</h3>

                    <div class="form-group">
                        <label for="form-head-coach">Head Coach</label>
                        <input type="text" id="form-head-coach">
                    </div>

                    <div class="form-group">
                        <label for="form-te-coach">TE/Position Coach</label>
                        <input type="text" id="form-te-coach">
                    </div>

                    <div class="form-group">
                        <label for="form-recruiting-contact">Recruiting Contact</label>
                        <input type="text" id="form-recruiting-contact">
                    </div>

                    <div class="form-group">
                        <label for="form-phone">Phone</label>
                        <input type="tel" id="form-phone">
                    </div>

                    <div class="form-group">
                        <label for="form-email">Email</label>
                        <input type="email" id="form-email">
                    </div>

                    <div class="form-group">
                        <label for="form-twitter">Twitter Handle(s)</label>
                        <input type="text" id="form-twitter" placeholder="@handle1, @handle2">
                    </div>

                    <h3 class="mt-2 mb-1">Status</h3>

                    <div class="form-group">
                        <label for="form-interest-our">Our Interest Level</label>
                        <select id="form-interest-our">
                            <option value="High">High</option>
                            <option value="Medium">Medium</option>
                            <option value="Low">Low</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="form-interest-their">Their Interest Level</label>
                        <select id="form-interest-their">
                            <option value="Unknown">Unknown</option>
                            <option value="High">High</option>
                            <option value="Medium">Medium</option>
                            <option value="Low">Low</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="form-likelihood">Likelihood</label>
                        <select id="form-likelihood">
                            <option value="Target">Target</option>
                            <option value="Safety">Safety</option>
                            <option value="Reach">Reach</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="form-offer-status">Offer Status</label>
                        <select id="form-offer-status">
                            <option value="None">None</option>
                            <option value="Interested">Interested</option>
                            <option value="Verbal Offer">Verbal Offer</option>
                            <option value="Official Offer">Official Offer</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="form-notes">Notes</label>
                        <textarea id="form-notes" rows="4"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="App.UI.closeModal('school-modal')">Cancel</button>
                <button class="btn btn-primary" onclick="App.UI.saveSchool()">Save School</button>
            </div>
        </div>
    </div>

    <!-- DELETE CONFIRMATION MODAL -->
    <div id="delete-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Confirm Delete</h2>
                <button class="modal-close" onclick="App.UI.closeModal('delete-modal')">&times;</button>
            </div>
            <div class="modal-body">
                <p>Are you sure you want to delete <strong id="delete-school-name"></strong>?</p>
                <p class="text-muted">This action cannot be undone.</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="App.UI.closeModal('delete-modal')">Cancel</button>
                <button class="btn btn-danger" onclick="App.UI.confirmDelete()">Delete</button>
            </div>
        </div>
    </div>

    <!-- VERIFY & UPDATE MODAL -->
    <div id="verify-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">üîç Verify & Update School Data</h2>
                <button class="modal-close" onclick="App.UI.closeModal('verify-modal')">&times;</button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="verify-school-id">

                <p class="text-muted mb-2">Update outdated AI data with current information. Check the school's official athletics website or 247Sports for the latest details.</p>

                <h3>Coaching Staff</h3>
                <div class="form-group">
                    <label for="verify-head-coach">Head Coach</label>
                    <input type="text" id="verify-head-coach" placeholder="e.g., Ryan Walters (2023-present)">
                </div>

                <div class="form-group">
                    <label for="verify-te-coach">TE/Position Coach</label>
                    <input type="text" id="verify-te-coach" placeholder="e.g., Drew Mehringer">
                </div>

                <div class="form-group">
                    <label for="verify-recruiting-contact">Recruiting Contact</label>
                    <input type="text" id="verify-recruiting-contact">
                </div>

                <div class="form-group">
                    <label for="verify-phone">Phone</label>
                    <input type="tel" id="verify-phone">
                </div>

                <div class="form-group">
                    <label for="verify-email">Email</label>
                    <input type="email" id="verify-email">
                </div>

                <div class="form-group">
                    <label for="verify-twitter">Twitter Handle(s)</label>
                    <input type="text" id="verify-twitter" placeholder="@CoachName, @TeamRecruiting">
                </div>

                <h3 class="mt-2">Current Season Info</h3>
                <div class="form-group">
                    <label for="verify-recent-record">Recent Record</label>
                    <input type="text" id="verify-recent-record" placeholder="e.g., 4-8 in 2024, 1-2 in 2025">
                    <small class="text-muted">Include current season and 1-2 previous seasons</small>
                </div>

                <div class="form-group">
                    <label for="verify-program-momentum">Program Momentum</label>
                    <select id="verify-program-momentum">
                        <option value="">Select...</option>
                        <option value="Up">Up - Improving record/recruiting</option>
                        <option value="Down">Down - Declining performance</option>
                        <option value="Stable">Stable - Consistent performance</option>
                        <option value="Rebuilding">Rebuilding - New coach/system</option>
                    </select>
                </div>

                <p class="text-muted mt-2"><strong>Tip:</strong> Check official athletics sites, 247Sports, or On3 for current info.</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="App.UI.closeModal('verify-modal')">Cancel</button>
                <button class="btn btn-success" onclick="App.UI.saveVerification()">‚úÖ Save Verified Data</button>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        /**
         * Joseph's Path to Glory - Application Logic
         * Version: 1.0
         */

        const App = {
            // ===== STORAGE MODULE =====
            Storage: {
                STORAGE_KEY: 'josephs-path-glory-data',
                VERSION: '1.0',

                // Initialize storage
                init() {
                    const data = this.getData();
                    if (!data) {
                        this.setData({
                            version: this.VERSION,
                            schools: [],
                            settings: {
                                apiKey: '',
                                theme: 'dark'
                            }
                        });
                    }
                },

                // Get all data
                getData() {
                    const data = localStorage.getItem(this.STORAGE_KEY);
                    return data ? JSON.parse(data) : null;
                },

                // Set all data
                setData(data) {
                    localStorage.setItem(this.STORAGE_KEY, JSON.stringify(data));
                },

                // Get all schools
                getSchools() {
                    const data = this.getData();
                    return data ? data.schools : [];
                },

                // Get single school by ID
                getSchool(id) {
                    const schools = this.getSchools();
                    return schools.find(s => s.id === id);
                },

                // Add or update school
                saveSchool(school) {
                    const data = this.getData();
                    const index = data.schools.findIndex(s => s.id === school.id);

                    if (index >= 0) {
                        // Update existing
                        school.lastUpdated = new Date().toISOString();
                        data.schools[index] = school;
                    } else {
                        // Add new
                        school.id = App.Utils.generateUUID();
                        school.dateAdded = new Date().toISOString();
                        school.lastUpdated = new Date().toISOString();
                        data.schools.push(school);
                    }

                    this.setData(data);
                    return school;
                },

                // Delete school
                deleteSchool(id) {
                    const data = this.getData();
                    data.schools = data.schools.filter(s => s.id !== id);
                    this.setData(data);
                },

                // Get/Set API Key
                getApiKey() {
                    const data = this.getData();
                    return data.settings.apiKey || '';
                },

                setApiKey(key) {
                    const data = this.getData();
                    data.settings.apiKey = key;
                    this.setData(data);
                },

                // Export data
                exportData() {
                    const data = this.getData();
                    const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = `josephs-path-glory-backup-${new Date().toISOString().split('T')[0]}.json`;
                    a.click();
                    URL.revokeObjectURL(url);
                    alert('Data exported successfully!');
                },

                // Import data
                importData(event) {
                    const file = event.target.files[0];
                    if (!file) return;

                    const reader = new FileReader();
                    reader.onload = (e) => {
                        try {
                            const data = JSON.parse(e.target.result);
                            if (data.version && data.schools) {
                                if (confirm(`Import ${data.schools.length} schools? This will overwrite existing data.`)) {
                                    this.setData(data);
                                    App.UI.renderDashboard();
                                    alert('Data imported successfully!');
                                }
                            } else {
                                alert('Invalid backup file format.');
                            }
                        } catch (err) {
                            alert('Error reading backup file: ' + err.message);
                        }
                    };
                    reader.readAsText(file);
                },

                // Clear all data
                clearAllData() {
                    if (confirm('‚ö†Ô∏è Delete ALL schools? This cannot be undone. Export first!')) {
                        if (confirm('Are you ABSOLUTELY sure? All data will be lost.')) {
                            localStorage.removeItem(this.STORAGE_KEY);
                            this.init();
                            App.UI.renderDashboard();
                            alert('All data cleared.');
                        }
                    }
                }
            },

            // ===== API MODULE =====
            API: {
                currentResearchData: null,

                // Research school with Claude API
                async researchSchool() {
                    const schoolName = document.getElementById('research-input').value.trim();

                    if (!schoolName) {
                        alert('Please enter a school name');
                        return;
                    }

                    // Check for API key
                    const apiKey = App.Storage.getApiKey();
                    if (!apiKey) {
                        alert('Please enter your Claude API key in Settings first');
                        App.UI.showView('settings');
                        return;
                    }

                    // Show loading state
                    document.getElementById('research-loading').classList.remove('hidden');
                    document.getElementById('research-error').classList.add('hidden');
                    document.getElementById('research-results').classList.add('hidden');

                    try {
                        // Build prompt from JOSEPH_CONTEXT.md
                        const prompt = this.buildResearchPrompt(schoolName);

                        // Call Claude API via Cloudflare Worker proxy
                        const response = await fetch('https://josephs-path-glory-proxy.dronescout-api.workers.dev', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                                'x-api-key': apiKey,
                                'anthropic-version': '2023-06-01'
                            },
                            body: JSON.stringify({
                                model: 'claude-sonnet-4-20250514',
                                max_tokens: 4000,
                                messages: [{
                                    role: 'user',
                                    content: prompt
                                }]
                            })
                        });

                        if (!response.ok) {
                            throw new Error(`API Error: ${response.status} ${response.statusText}`);
                        }

                        const data = await response.json();
                        const aiResponse = data.content[0].text;

                        // Parse JSON response
                        let schoolData;
                        try {
                            schoolData = JSON.parse(aiResponse);
                        } catch (e) {
                            // Try to extract JSON if wrapped in markdown
                            const jsonMatch = aiResponse.match(/\{[\s\S]*\}/);
                            if (jsonMatch) {
                                schoolData = JSON.parse(jsonMatch[0]);
                            } else {
                                throw new Error('Could not parse AI response as JSON');
                            }
                        }

                        // Store research data
                        this.currentResearchData = schoolData;

                        // Hide loading, show results
                        document.getElementById('research-loading').classList.add('hidden');
                        this.displayResults(schoolData);

                    } catch (error) {
                        console.error('Research error:', error);
                        document.getElementById('research-loading').classList.add('hidden');
                        document.getElementById('research-error').classList.remove('hidden');
                        document.getElementById('research-error-message').textContent =
                            error.message || 'An error occurred while researching. Please try again.';
                    }
                },

                // Build research prompt
                buildResearchPrompt(schoolName) {
                    return `You are a college football recruiting analyst with a Chief of Staff mindset. Research and provide a comprehensive assessment of ${schoolName} for a high school senior tight end recruit (Joseph).

YOUR APPROACH:
- High-impact brevity - Cut through recruiting hype, focus on facts
- Skeptical lens - Challenge assumptions, identify red flags early
- Forward-thinking - Consider Joseph's path 2-4 years out (transfer pipeline, eligibility)
- Reality-based - No aspirational thinking, only what's likely given his profile

CRITICAL CONTEXT - JOSEPH'S SITUATION:
- HS senior TE who missed junior season (injury) - LIMITED FILM
- Mid-to-low 2.X GPA, no standardized test scores - ACADEMIC RISK
- Needs objective financial data for informed decision-making
- Needs to build more game film for transfer opportunities
- Two years of eligibility remaining (critical for 4-year vs JUCO decision)
- Looking at JUCO or D2/D3/NAIA options
- Current situation: 1 actual offer (Elmhurst D3), active recruiting interest from Beloit (D3) and Quincy (D2)
- Top JUCO targets: Coffeyville CC (2024 All-American TE), Iowa Western CC (Hall of Fame coach, 150+ D1 transfers), Hutchinson CC (2024 National Champions)

ASSESSMENT PRIORITIES:
1. Financial data - Objective costs, scholarship potential, ROI analysis (cost vs playing time vs transfer pipeline)
2. TE development track record - Specific examples, not generic claims
3. Program stability - Coaching turnover = major red flag
4. Transfer pipeline - Where do players go after? (for JUCO) / Can he compete? (for 4-year)
5. Playing time reality - Don't sugarcoat his chances

BE FACTUAL AND ANALYTICAL:
- If program is in chaos, say so explicitly
- Provide cost data without affordability judgments (e.g., "Lower cost provides more flexibility" not "Family can't afford this")
- If TE development is weak/nonexistent, flag it prominently
- For 4-year schools, provide objective JUCO comparison (cost differences, tradeoffs) without declaring one "clearly better"
- Challenge recruiting narratives with evidence

Provide your response in this EXACT JSON format (DO NOT include markdown code blocks, ONLY the raw JSON):

{
  "school_name": "Full official name",
  "level": "JUCO/D1/D2/D3/NAIA",
  "location": "City, State",
  "conference": "Conference name",
  "tuition_cost": "Annual cost estimate",
  "four_year_cost": "Total 4-year estimate (or 2-year for JUCO)",
  "head_coach": "Name and tenure",
  "te_coach": "TE coach name or position (be specific if it's a GA or not full-time)",
  "recruiting_contact": "Key recruiting contact",
  "phone": "Main athletics phone",
  "email": "Contact email if available",
  "twitter": "Twitter handle(s)",
  "recent_record": "Last 2-3 seasons record",
  "program_momentum": "Up/Down/Rebuilding/Stable - with brief explanation",
  "te_development": "Track record developing TEs - specific examples with names/years",
  "transfer_pipeline": "Where players transfer to (for JUCO) or quality of incoming transfers (for 4-year)",
  "scholarship_potential": "None (D3)/Limited/Moderate/Strong - with explanation specific to Joseph's profile",
  "red_flags": ["List of specific concerns for Joseph's situation"],
  "opportunities": ["List of specific positive factors for Joseph"],
  "financial_comparison": "Objective cost analysis with ROI: total cost vs scholarship potential vs transfer pipeline vs playing time opportunities. Compare to other levels (e.g., JUCO $16k, D2 $64k with scholarship, D3 $168k). Neutral tone - no affordability judgments.",
  "overall_ranking": "Reach/Target/Safety",
  "recommendation": "High Priority/Medium Priority/Low Priority/Skip - with brief rationale",
  "contact_strategy": "Recommended approach (Twitter DM first/Email/Phone/In-person) with timing",
  "contact_script_twitter": "Sample 280-character Twitter DM ready to copy/paste",
  "contact_script_email": "Sample email with subject line and 2-3 paragraph body ready to copy/paste",
  "comparison_to_juco": "If this is a 4-year school: Objective comparison to JUCO (cost, playing time, transfer opportunities, tradeoffs). Neutral tone - present both options fairly. If JUCO school: null"
}`;
                },

                // Display results
                displayResults(data) {
                    const html = `
                        <div style="background: var(--color-bg-secondary); border: 2px solid var(--color-accent-primary); border-radius: var(--border-radius); padding: 1rem; margin-bottom: 1.5rem;">
                            <h2>${data.school_name}</h2>
                            <p><span class="school-badge badge-${data.level?.toLowerCase() || 'juco'}">${data.level}</span> ${data.location}</p>
                            <p><strong>Conference:</strong> ${data.conference || 'N/A'}</p>
                            ${data.recommendation ? `<p style="color: var(--color-accent-secondary); font-weight: 700; font-size: 1.1rem;">üìã Recommendation: ${data.recommendation}</p>` : ''}
                        </div>

                        <div style="display: grid; gap: 1.5rem;">
                            <!-- Financial Overview -->
                            <div style="background: var(--color-bg-secondary); border-radius: var(--border-radius); padding: 1rem;">
                                <h3>üí∞ Financial Overview</h3>
                                ${data.tuition_cost ? `<p><strong>Annual Cost:</strong> ${data.tuition_cost}</p>` : ''}
                                ${data.four_year_cost ? `<p><strong>Total Cost:</strong> ${data.four_year_cost}</p>` : ''}
                                ${data.scholarship_potential ? `<p><strong>Scholarship Potential:</strong> ${data.scholarship_potential}</p>` : ''}
                                ${data.financial_comparison ? `<p style="margin-top: 0.5rem; padding-top: 0.5rem; border-top: 1px solid var(--color-border);"><strong>Cost Comparison & ROI:</strong><br>${data.financial_comparison}</p>` : ''}
                            </div>

                            <!-- Coaching Staff -->
                            <div style="background: var(--color-bg-secondary); border-radius: var(--border-radius); padding: 1rem;">
                                <h3>üëî Coaching Staff</h3>
                                ${data.head_coach ? `<p><strong>Head Coach:</strong> ${data.head_coach}</p>` : ''}
                                ${data.te_coach ? `<p><strong>TE Coach:</strong> ${data.te_coach}</p>` : ''}
                                ${data.recruiting_contact ? `<p><strong>Recruiting Contact:</strong> ${data.recruiting_contact}</p>` : ''}
                                ${data.phone ? `<p><strong>Phone:</strong> <a href="tel:${data.phone}" style="color: var(--color-accent-primary);">${data.phone}</a></p>` : ''}
                                ${data.email ? `<p><strong>Email:</strong> <a href="mailto:${data.email}" style="color: var(--color-accent-primary);">${data.email}</a></p>` : ''}
                                ${data.twitter ? `<p><strong>Twitter:</strong> ${data.twitter}</p>` : ''}
                            </div>

                            <!-- Program Analysis -->
                            <div style="background: var(--color-bg-secondary); border-radius: var(--border-radius); padding: 1rem;">
                                <h3>üìä Program Analysis</h3>
                                ${data.recent_record ? `<p><strong>Recent Record:</strong> ${data.recent_record}</p>` : ''}
                                ${data.program_momentum ? `<p><strong>Momentum:</strong> ${data.program_momentum}</p>` : ''}
                                ${data.te_development ? `<p><strong>TE Development:</strong> ${data.te_development}</p>` : ''}
                                ${data.transfer_pipeline ? `<p><strong>Transfer Pipeline:</strong> ${data.transfer_pipeline}</p>` : ''}
                            </div>

                            <!-- Red Flags -->
                            ${data.red_flags && data.red_flags.length > 0 ? `
                                <div style="background: var(--color-bg-secondary); border: 1px solid var(--color-danger); border-radius: var(--border-radius); padding: 1rem;">
                                    <h3 style="color: var(--color-danger);">‚ö†Ô∏è Red Flags</h3>
                                    <ul style="margin: 0.5rem 0 0 1.5rem;">
                                        ${data.red_flags.map(flag => `<li>${flag}</li>`).join('')}
                                    </ul>
                                </div>
                            ` : ''}

                            <!-- Opportunities -->
                            ${data.opportunities && data.opportunities.length > 0 ? `
                                <div style="background: var(--color-bg-secondary); border: 1px solid var(--color-success); border-radius: var(--border-radius); padding: 1rem;">
                                    <h3 style="color: var(--color-success);">‚úÖ Opportunities</h3>
                                    <ul style="margin: 0.5rem 0 0 1.5rem;">
                                        ${data.opportunities.map(opp => `<li>${opp}</li>`).join('')}
                                    </ul>
                                </div>
                            ` : ''}

                            <!-- Contact Strategy -->
                            ${data.contact_strategy || data.contact_script_twitter || data.contact_script_email ? `
                                <div style="background: var(--color-bg-secondary); border-radius: var(--border-radius); padding: 1rem;">
                                    <h3>üìû Contact Strategy</h3>
                                    ${data.contact_strategy ? `<p>${data.contact_strategy}</p>` : ''}

                                    ${data.contact_script_twitter ? `
                                        <div style="margin-top: 1rem; padding: 0.75rem; background: var(--color-bg-tertiary); border-radius: 4px;">
                                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                                                <strong>Twitter DM Template:</strong>
                                                <button class="btn btn-small btn-secondary" onclick="App.API.copyToClipboard('${data.contact_script_twitter.replace(/'/g, "\\'")}', 'Twitter DM')">üìã Copy</button>
                                            </div>
                                            <p style="font-size: 0.9rem; margin: 0;">${data.contact_script_twitter}</p>
                                        </div>
                                    ` : ''}

                                    ${data.contact_script_email ? `
                                        <div style="margin-top: 1rem; padding: 0.75rem; background: var(--color-bg-tertiary); border-radius: 4px;">
                                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                                                <strong>Email Template:</strong>
                                                <button class="btn btn-small btn-secondary" onclick="App.API.copyToClipboard(\`${data.contact_script_email.replace(/`/g, "\\`")}\`, 'Email')">üìã Copy</button>
                                            </div>
                                            <pre style="font-size: 0.85rem; margin: 0; white-space: pre-wrap; font-family: var(--font-family);">${data.contact_script_email}</pre>
                                        </div>
                                    ` : ''}
                                </div>
                            ` : ''}

                            <!-- JUCO Comparison (for 4-year schools) -->
                            ${data.comparison_to_juco ? `
                                <div style="background: var(--color-bg-secondary); border: 1px solid var(--color-info); border-radius: var(--border-radius); padding: 1rem;">
                                    <h3 style="color: var(--color-info);">üîÑ vs JUCO Option</h3>
                                    <p>${data.comparison_to_juco}</p>
                                </div>
                            ` : ''}
                        </div>
                    `;

                    document.getElementById('research-results-content').innerHTML = html;
                    document.getElementById('research-results').classList.remove('hidden');
                },

                // Copy to clipboard
                copyToClipboard(text, label) {
                    navigator.clipboard.writeText(text).then(() => {
                        alert(`${label} copied to clipboard!`);
                    }).catch(err => {
                        console.error('Copy failed:', err);
                        alert('Failed to copy. Please select and copy manually.');
                    });
                },

                // Save researched school to tracker
                saveResearchedSchool() {
                    if (!this.currentResearchData) {
                        alert('No research data to save');
                        return;
                    }

                    const data = this.currentResearchData;

                    // Map AI response to school schema
                    const schoolData = {
                        schoolName: data.school_name,
                        level: data.level,
                        location: data.location,
                        conference: data.conference,

                        // Coaching staff
                        headCoach: data.head_coach,
                        positionCoach: data.te_coach,
                        recruitingContact: data.recruiting_contact,
                        phone: data.phone,
                        email: data.email,
                        twitter: data.twitter,

                        // Status - set defaults
                        ourInterestLevel: data.recommendation?.includes('High Priority') ? 'High' :
                                         data.recommendation?.includes('Medium Priority') ? 'Medium' : 'Low',
                        theirInterestLevel: 'Unknown',
                        likelihood: data.overall_ranking || 'Target',
                        offerStatus: 'None',

                        // Initialize empty arrays
                        contactHistory: [],
                        actionHistory: [],

                        // Initialize ratings at 0
                        ratings: {
                            coach: 0,
                            programFit: 0,
                            financial: 0,
                            academic: 0,
                            location: 0,
                            overall: 0
                        },

                        // AI Analysis
                        aiAnalysis: {
                            recentRecord: data.recent_record,
                            tuitionCost: data.tuition_cost,
                            fourYearCost: data.four_year_cost,
                            scholarshipPotential: data.scholarship_potential,
                            programMomentum: data.program_momentum,
                            teDevelopment: data.te_development,
                            transferPipeline: data.transfer_pipeline,
                            redFlags: data.red_flags || [],
                            opportunities: data.opportunities || [],
                            financialComparison: data.financial_comparison,
                            recommendation: data.recommendation,
                            contactStrategy: data.contact_strategy,
                            contactScriptTwitter: data.contact_script_twitter,
                            contactScriptEmail: data.contact_script_email,
                            comparisonToJuco: data.comparison_to_juco,
                            researchDate: new Date().toISOString()
                        },

                        // Verification tracking
                        lastVerifiedDate: null,
                        manualOverrides: {
                            headCoach: false,
                            positionCoach: false,
                            recentRecord: false,
                            programMomentum: false
                        },

                        notes: `Researched with AI on ${new Date().toLocaleDateString()}`
                    };

                    // Save to storage
                    App.Storage.saveSchool(schoolData);

                    // Clear research and return to dashboard
                    this.clearResearch();
                    App.UI.showView('dashboard');

                    alert(`${data.school_name} saved to tracker!`);
                },

                // Clear research
                clearResearch() {
                    this.currentResearchData = null;
                    document.getElementById('research-input').value = '';
                    document.getElementById('research-results').classList.add('hidden');
                    document.getElementById('research-error').classList.add('hidden');
                    document.getElementById('research-loading').classList.add('hidden');
                }
            },

            // ===== UI MODULE =====
            UI: {
                currentView: 'dashboard',
                currentFilter: 'all',
                currentSort: 'interest',
                searchQuery: '',
                editingSchoolId: null,
                deletingSchoolId: null,

                // Initialize UI
                init() {
                    // Navigation
                    document.querySelectorAll('.nav-btn[data-view]').forEach(btn => {
                        btn.addEventListener('click', () => {
                            this.showView(btn.dataset.view);
                        });
                    });

                    // Filter buttons
                    document.querySelectorAll('.filter-btn').forEach(btn => {
                        btn.addEventListener('click', () => {
                            document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                            btn.classList.add('active');
                            this.currentFilter = btn.dataset.filter;
                            this.renderSchools();
                        });
                    });

                    // Sort select
                    document.getElementById('sort-select').addEventListener('change', (e) => {
                        this.currentSort = e.target.value;
                        this.renderSchools();
                    });

                    // Search input
                    document.getElementById('search-input').addEventListener('input', (e) => {
                        this.searchQuery = e.target.value.toLowerCase();
                        this.renderSchools();
                    });

                    // API Key input
                    const apiKeyInput = document.getElementById('api-key-input');
                    apiKeyInput.value = App.Storage.getApiKey();
                    apiKeyInput.addEventListener('change', (e) => {
                        App.Storage.setApiKey(e.target.value);
                    });

                    // Render initial view
                    this.renderDashboard();
                },

                // Show view
                showView(viewName) {
                    // Hide all views
                    document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));

                    // Show selected view
                    document.getElementById(`${viewName}-view`).classList.add('active');

                    // Update nav buttons
                    document.querySelectorAll('.nav-btn[data-view]').forEach(btn => {
                        btn.classList.toggle('active', btn.dataset.view === viewName);
                    });

                    this.currentView = viewName;

                    // Render view content
                    if (viewName === 'dashboard') {
                        this.renderDashboard();
                    } else if (viewName === 'actions') {
                        this.renderActions();
                    }
                },

                // Render dashboard
                renderDashboard() {
                    this.renderStats();
                    this.renderSchools();
                },

                // Render stats
                renderStats() {
                    const schools = App.Storage.getSchools();
                    const offers = schools.filter(s =>
                        s.offerStatus === 'Verbal Offer' || s.offerStatus === 'Official Offer'
                    ).length;
                    const priority = schools.filter(s => s.ourInterestLevel === 'High').length;

                    document.getElementById('stat-total').textContent = schools.length;
                    document.getElementById('stat-offers').textContent = offers;
                    document.getElementById('stat-priority').textContent = priority;
                },

                // Render schools
                renderSchools() {
                    let schools = App.Storage.getSchools();

                    // Filter
                    if (this.currentFilter !== 'all') {
                        schools = schools.filter(s => s.level === this.currentFilter);
                    }

                    // Search
                    if (this.searchQuery) {
                        schools = schools.filter(s =>
                            s.schoolName.toLowerCase().includes(this.searchQuery) ||
                            (s.location && s.location.toLowerCase().includes(this.searchQuery))
                        );
                    }

                    // Sort
                    schools = this.sortSchools(schools, this.currentSort);

                    // Render
                    const grid = document.getElementById('school-grid');
                    const emptyState = document.getElementById('empty-state');

                    if (schools.length === 0) {
                        grid.innerHTML = '';
                        emptyState.classList.remove('hidden');
                    } else {
                        emptyState.classList.add('hidden');
                        grid.innerHTML = schools.map(s => this.renderSchoolCard(s)).join('');
                    }
                },

                // Sort schools
                sortSchools(schools, sortBy) {
                    const sorted = [...schools];

                    switch (sortBy) {
                        case 'name':
                            sorted.sort((a, b) => a.schoolName.localeCompare(b.schoolName));
                            break;
                        case 'date':
                            sorted.sort((a, b) => new Date(b.dateAdded) - new Date(a.dateAdded));
                            break;
                        case 'rating':
                            sorted.sort((a, b) => (b.ratings?.overall || 0) - (a.ratings?.overall || 0));
                            break;
                        case 'interest':
                        default:
                            const interestOrder = { 'High': 3, 'Medium': 2, 'Low': 1 };
                            sorted.sort((a, b) =>
                                (interestOrder[b.ourInterestLevel] || 0) - (interestOrder[a.ourInterestLevel] || 0)
                            );
                    }

                    return sorted;
                },

                // Render school card
                renderSchoolCard(school) {
                    const levelClass = `badge-${school.level.toLowerCase().replace(/\s/g, '-')}`;
                    const likelihoodClass = `badge-${school.likelihood?.toLowerCase() || 'target'}`;
                    const rating = school.ratings?.overall || 0;
                    const nextAction = school.nextAction || 'No action set';

                    return `
                        <div class="school-card" onclick="App.UI.showSchoolDetail('${school.id}')">
                            <div class="school-card-header">
                                <div class="school-name">${school.schoolName} ${this.getVerificationBadge(school)}</div>
                                ${rating > 0 ? `<div class="school-rating">‚≠ê ${rating.toFixed(1)}</div>` : ''}
                            </div>
                            <div class="school-meta">
                                <span class="school-badge ${levelClass}">${school.level}</span>
                                ${school.likelihood ? `<span class="school-badge ${likelihoodClass}">${school.likelihood}</span>` : ''}
                            </div>
                            <div class="school-meta">${school.location || 'Location not set'}</div>
                            ${school.offerStatus && school.offerStatus !== 'None' ?
                                `<div class="school-meta text-success">üìã ${school.offerStatus}</div>` : ''}
                            <div class="school-action">
                                Next: ${nextAction}
                            </div>
                        </div>
                    `;
                },

                // Show school detail
                showSchoolDetail(schoolId) {
                    const school = App.Storage.getSchool(schoolId);
                    if (!school) return;

                    this.editingSchoolId = schoolId;

                    const content = `
                        <div class="school-card-header">
                            <div class="school-name">${school.schoolName}</div>
                        </div>
                        <div class="school-meta mb-2">
                            <span class="school-badge badge-${school.level.toLowerCase()}">${school.level}</span>
                            ${school.likelihood ? `<span class="school-badge badge-${school.likelihood.toLowerCase()}">${school.likelihood}</span>` : ''}
                        </div>

                        ${this.renderVerificationWarning(school)}

                        <div class="btn-group">
                            <button class="btn btn-secondary" onclick="App.UI.showVerifyModal('${schoolId}')">üîç Verify & Update</button>
                            <button class="btn btn-secondary" onclick="App.UI.editSchool('${schoolId}')">‚úèÔ∏è Edit</button>
                            <button class="btn btn-danger" onclick="App.UI.deleteSchool('${schoolId}')">üóëÔ∏è Delete</button>
                        </div>

                        <!-- Tabs -->
                        <div class="tabs">
                            <button class="tab-btn active" data-tab="overview">Overview</button>
                            <button class="tab-btn" data-tab="contacts">Contacts</button>
                            <button class="tab-btn" data-tab="actions">Actions</button>
                            <button class="tab-btn" data-tab="ai">AI Analysis</button>
                        </div>

                        <!-- Tab: Overview -->
                        <div class="tab-content active" data-tab="overview">
                            ${this.renderOverviewTab(school)}
                        </div>

                        <!-- Tab: Contacts -->
                        <div class="tab-content" data-tab="contacts">
                            ${this.renderContactsTab(school)}
                        </div>

                        <!-- Tab: Actions -->
                        <div class="tab-content" data-tab="actions">
                            ${this.renderActionsTab(school)}
                        </div>

                        <!-- Tab: AI Analysis -->
                        <div class="tab-content" data-tab="ai">
                            ${this.renderAITab(school)}
                        </div>
                    `;

                    document.getElementById('detail-content').innerHTML = content;

                    // Tab switching
                    document.querySelectorAll('.tab-btn').forEach(btn => {
                        btn.addEventListener('click', () => {
                            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                            btn.classList.add('active');
                            document.querySelector(`.tab-content[data-tab="${btn.dataset.tab}"]`).classList.add('active');
                        });
                    });

                    this.showView('detail');
                },

                // Render verification warning
                renderVerificationWarning(school) {
                    const researchDate = school.aiAnalysis?.researchDate;
                    const verifiedDate = school.lastVerifiedDate;

                    if (!researchDate) return ''; // No AI data, no warning needed

                    const now = new Date();
                    const research = new Date(researchDate);
                    const daysSinceResearch = Math.floor((now - research) / (1000 * 60 * 60 * 24));

                    let warningClass = '';
                    let warningIcon = '';
                    let warningMessage = '';

                    if (verifiedDate) {
                        const verified = new Date(verifiedDate);
                        const daysSinceVerification = Math.floor((now - verified) / (1000 * 60 * 60 * 24));

                        if (daysSinceVerification <= 30) {
                            warningClass = 'text-success';
                            warningIcon = '‚úÖ';
                            warningMessage = `Data verified ${App.Utils.formatDate(verifiedDate)}`;
                        } else if (daysSinceVerification <= 90) {
                            warningClass = 'text-warning';
                            warningIcon = '‚ö†Ô∏è';
                            warningMessage = `Last verified ${daysSinceVerification} days ago. Consider re-verifying coaching staff and current season info.`;
                        } else {
                            warningClass = 'text-danger';
                            warningIcon = 'üî¥';
                            warningMessage = `Data hasn't been verified in ${daysSinceVerification} days. Coaching staff and season info likely outdated.`;
                        }
                    } else if (daysSinceResearch > 30) {
                        warningClass = 'text-warning';
                        warningIcon = '‚ö†Ô∏è';
                        warningMessage = `AI data from ${App.Utils.formatDate(researchDate)}. Coaching staff and current season info may be outdated. Click "Verify & Update" to confirm current details.`;
                    } else {
                        return ''; // Recent research, not verified yet, but fresh enough
                    }

                    return `
                        <div style="background: var(--color-bg-secondary); border: 1px solid var(--color-${warningClass === 'text-success' ? 'success' : warningClass === 'text-danger' ? 'danger' : 'warning'}); border-radius: var(--border-radius); padding: 0.75rem; margin-bottom: 1rem;">
                            <p class="${warningClass}" style="margin: 0;"><strong>${warningIcon} ${warningMessage}</strong></p>
                        </div>
                    `;
                },

                // Get verification badge for school card
                getVerificationBadge(school) {
                    const verifiedDate = school.lastVerifiedDate;

                    if (!verifiedDate) {
                        return '<span style="font-size: 0.75rem; color: var(--color-text-muted);">‚ö†Ô∏è AI</span>';
                    }

                    const now = new Date();
                    const verified = new Date(verifiedDate);
                    const daysSince = Math.floor((now - verified) / (1000 * 60 * 60 * 24));

                    if (daysSince <= 30) {
                        return '<span style="font-size: 0.75rem; color: var(--color-success);">‚úÖ</span>';
                    } else if (daysSince <= 90) {
                        return '<span style="font-size: 0.75rem; color: var(--color-warning);">‚ö†Ô∏è</span>';
                    } else {
                        return '<span style="font-size: 0.75rem; color: var(--color-danger);">üî¥</span>';
                    }
                },

                // Show verify modal
                showVerifyModal(schoolId) {
                    const school = App.Storage.getSchool(schoolId);
                    if (!school) return;

                    document.getElementById('verify-school-id').value = schoolId;
                    document.getElementById('verify-head-coach').value = school.headCoach || '';
                    document.getElementById('verify-te-coach').value = school.positionCoach || '';
                    document.getElementById('verify-recruiting-contact').value = school.recruitingContact || '';
                    document.getElementById('verify-phone').value = school.phone || '';
                    document.getElementById('verify-email').value = school.email || '';
                    document.getElementById('verify-twitter').value = school.twitter || '';
                    document.getElementById('verify-recent-record').value = school.aiAnalysis?.recentRecord || '';
                    document.getElementById('verify-program-momentum').value = school.aiAnalysis?.programMomentum?.split(' ')[0] || '';

                    this.openModal('verify-modal');
                },

                // Save verification
                saveVerification() {
                    const schoolId = document.getElementById('verify-school-id').value;
                    const school = App.Storage.getSchool(schoolId);
                    if (!school) return;

                    // Get form values
                    const headCoach = document.getElementById('verify-head-coach').value.trim();
                    const teCoach = document.getElementById('verify-te-coach').value.trim();
                    const recruitingContact = document.getElementById('verify-recruiting-contact').value.trim();
                    const phone = document.getElementById('verify-phone').value.trim();
                    const email = document.getElementById('verify-email').value.trim();
                    const twitter = document.getElementById('verify-twitter').value.trim();
                    const recentRecord = document.getElementById('verify-recent-record').value.trim();
                    const programMomentum = document.getElementById('verify-program-momentum').value;

                    // Update school data
                    const updated = {
                        ...school,
                        headCoach,
                        positionCoach: teCoach,
                        recruitingContact,
                        phone,
                        email,
                        twitter,
                        lastVerifiedDate: new Date().toISOString(),
                        manualOverrides: {
                            headCoach: headCoach !== school.headCoach,
                            positionCoach: teCoach !== school.positionCoach,
                            recentRecord: recentRecord !== school.aiAnalysis?.recentRecord,
                            programMomentum: programMomentum && programMomentum !== school.aiAnalysis?.programMomentum?.split(' ')[0]
                        }
                    };

                    // Update AI analysis if present
                    if (updated.aiAnalysis) {
                        if (recentRecord) {
                            updated.aiAnalysis.recentRecord = recentRecord;
                        }
                        if (programMomentum) {
                            updated.aiAnalysis.programMomentum = programMomentum;
                        }
                    }

                    // Save
                    App.Storage.saveSchool(updated);

                    // Close modal and refresh detail view
                    this.closeModal('verify-modal');
                    this.showSchoolDetail(schoolId);

                    alert('‚úÖ School data verified and updated!');
                },

                // Render Overview Tab
                renderOverviewTab(school) {
                    return `
                        <h3>Status</h3>
                        <p><strong>Our Interest:</strong> ${school.ourInterestLevel || 'Not set'}</p>
                        <p><strong>Their Interest:</strong> ${school.theirInterestLevel || 'Unknown'}</p>
                        <p><strong>Likelihood:</strong> ${school.likelihood || 'Not set'}</p>
                        <p><strong>Offer Status:</strong> ${school.offerStatus || 'None'}</p>

                        ${school.ratings ? `
                            <div class="overall-rating mt-2">
                                <div class="value">${school.ratings.overall.toFixed(1)}</div>
                                <div class="label">Overall Rating</div>
                            </div>
                            <div class="rating-group">
                                <div class="rating-row">
                                    <span class="rating-label">Coaching:</span>
                                    <span>${'‚≠ê'.repeat(school.ratings.coach || 0)}</span>
                                </div>
                                <div class="rating-row">
                                    <span class="rating-label">Program Fit:</span>
                                    <span>${'‚≠ê'.repeat(school.ratings.programFit || 0)}</span>
                                </div>
                                <div class="rating-row">
                                    <span class="rating-label">Financial:</span>
                                    <span>${'‚≠ê'.repeat(school.ratings.financial || 0)}</span>
                                </div>
                                <div class="rating-row">
                                    <span class="rating-label">Academic:</span>
                                    <span>${'‚≠ê'.repeat(school.ratings.academic || 0)}</span>
                                </div>
                                <div class="rating-row">
                                    <span class="rating-label">Location:</span>
                                    <span>${'‚≠ê'.repeat(school.ratings.location || 0)}</span>
                                </div>
                            </div>
                        ` : '<p class="text-muted">No ratings yet. Edit school to add ratings.</p>'}

                        <h3 class="mt-2">Next Action</h3>
                        <p>${school.nextAction || 'No action set'}</p>
                        ${school.actionOwner ? `<p><strong>Owner:</strong> ${school.actionOwner}</p>` : ''}
                        ${school.actionDueDate ? `<p><strong>Due:</strong> ${App.Utils.formatDate(school.actionDueDate)}</p>` : ''}

                        ${school.notes ? `
                            <h3 class="mt-2">Notes</h3>
                            <p>${school.notes}</p>
                        ` : ''}
                    `;
                },

                // Render Contacts Tab
                renderContactsTab(school) {
                    return `
                        <h3>Staff Information</h3>
                        ${school.headCoach ? `<p><strong>Head Coach:</strong> ${school.headCoach}</p>` : ''}
                        ${school.positionCoach ? `<p><strong>TE Coach:</strong> ${school.positionCoach}</p>` : ''}
                        ${school.recruitingContact ? `<p><strong>Recruiting Contact:</strong> ${school.recruitingContact}</p>` : ''}
                        ${school.phone ? `<p><strong>Phone:</strong> <a href="tel:${school.phone}">${school.phone}</a></p>` : ''}
                        ${school.email ? `<p><strong>Email:</strong> <a href="mailto:${school.email}">${school.email}</a></p>` : ''}
                        ${school.twitter ? `<p><strong>Twitter:</strong> ${school.twitter}</p>` : ''}

                        <h3 class="mt-2">Contact History</h3>
                        ${school.contactHistory && school.contactHistory.length > 0 ?
                            school.contactHistory.map(c => `
                                <div class="history-item">
                                    <div class="history-header">
                                        <span class="history-date">${App.Utils.formatDate(c.date)}</span>
                                        <span class="history-method">${c.method}</span>
                                    </div>
                                    <p><strong>By:</strong> ${c.initiatedBy}</p>
                                    <p class="history-notes">${c.notes}</p>
                                    ${c.response ? `<p><strong>Response:</strong> ${c.response}</p>` : ''}
                                </div>
                            `).join('') :
                            '<p class="text-muted">No contact history yet.</p>'
                        }
                        <p class="text-muted mt-2">Edit school to add contact entries (Phase 3 will add quick-add form).</p>
                    `;
                },

                // Render Actions Tab
                renderActionsTab(school) {
                    return `
                        <h3>Upcoming Actions</h3>
                        ${school.actionHistory && school.actionHistory.filter(a => a.status === 'Pending').length > 0 ?
                            school.actionHistory.filter(a => a.status === 'Pending').map(a => `
                                <div class="history-item">
                                    <p><strong>${a.action}</strong></p>
                                    <p><strong>Owner:</strong> ${a.owner}</p>
                                    <p><strong>Due:</strong> ${App.Utils.formatDate(a.dueDate)}</p>
                                </div>
                            `).join('') :
                            '<p class="text-muted">No pending actions.</p>'
                        }

                        <h3 class="mt-2">Completed Actions</h3>
                        ${school.actionHistory && school.actionHistory.filter(a => a.status === 'Complete').length > 0 ?
                            school.actionHistory.filter(a => a.status === 'Complete').map(a => `
                                <div class="history-item">
                                    <p><strong>${a.action}</strong></p>
                                    <p><strong>Completed:</strong> ${App.Utils.formatDate(a.completedDate)}</p>
                                </div>
                            `).join('') :
                            '<p class="text-muted">No completed actions yet.</p>'
                        }
                        <p class="text-muted mt-2">Edit school to add action items (Phase 3 will add quick-add form).</p>
                    `;
                },

                // Render AI Tab
                renderAITab(school) {
                    if (school.aiAnalysis) {
                        const ai = school.aiAnalysis;
                        return `
                            <h3>Program Analysis</h3>
                            ${ai.recentRecord ? `<p><strong>Recent Record:</strong> ${ai.recentRecord}</p>` : ''}
                            ${ai.programMomentum ? `<p><strong>Momentum:</strong> ${ai.programMomentum}</p>` : ''}
                            ${ai.teDevelopment ? `<p><strong>TE Development:</strong> ${ai.teDevelopment}</p>` : ''}
                            ${ai.transferPipeline ? `<p><strong>Transfer Pipeline:</strong> ${ai.transferPipeline}</p>` : ''}

                            <h3 class="mt-2">Financial</h3>
                            ${ai.tuitionCost ? `<p><strong>Annual Cost:</strong> ${ai.tuitionCost}</p>` : ''}
                            ${ai.fourYearCost ? `<p><strong>Total Cost:</strong> ${ai.fourYearCost}</p>` : ''}
                            ${ai.scholarshipPotential ? `<p><strong>Scholarship Potential:</strong> ${ai.scholarshipPotential}</p>` : ''}

                            ${ai.redFlags && ai.redFlags.length > 0 ? `
                                <h3 class="mt-2">‚ö†Ô∏è Red Flags</h3>
                                <ul>
                                    ${ai.redFlags.map(f => `<li>${f}</li>`).join('')}
                                </ul>
                            ` : ''}

                            ${ai.opportunities && ai.opportunities.length > 0 ? `
                                <h3 class="mt-2">‚úÖ Opportunities</h3>
                                <ul>
                                    ${ai.opportunities.map(o => `<li>${o}</li>`).join('')}
                                </ul>
                            ` : ''}
                        `;
                    } else {
                        return `
                            <div class="empty-state">
                                <div class="empty-icon">ü§ñ</div>
                                <div class="empty-message">No AI analysis yet</div>
                                <p class="text-muted">AI Research will be available in Phase 2</p>
                            </div>
                        `;
                    }
                },

                // Render Actions View
                renderActions() {
                    const schools = App.Storage.getSchools();
                    let allActions = [];

                    schools.forEach(school => {
                        if (school.nextAction) {
                            allActions.push({
                                school: school.schoolName,
                                action: school.nextAction,
                                owner: school.actionOwner || 'Not assigned',
                                dueDate: school.actionDueDate,
                                status: school.actionStatus || 'Pending'
                            });
                        }
                    });

                    const pending = allActions.filter(a => a.status === 'Pending');
                    const completed = allActions.filter(a => a.status === 'Complete');

                    const content = `
                        <h3>Pending Actions (${pending.length})</h3>
                        ${pending.length > 0 ? pending.map(a => `
                            <div class="history-item">
                                <p><strong>${a.school}</strong></p>
                                <p>${a.action}</p>
                                <p><strong>Owner:</strong> ${a.owner}</p>
                                ${a.dueDate ? `<p><strong>Due:</strong> ${App.Utils.formatDate(a.dueDate)}</p>` : ''}
                            </div>
                        `).join('') : '<p class="text-muted">No pending actions.</p>'}

                        <h3 class="mt-2">Completed Actions (${completed.length})</h3>
                        ${completed.length > 0 ? completed.map(a => `
                            <div class="history-item">
                                <p><strong>${a.school}</strong></p>
                                <p>${a.action}</p>
                            </div>
                        `).join('') : '<p class="text-muted">No completed actions yet.</p>'}
                    `;

                    document.getElementById('actions-content').innerHTML = content;
                },

                // Show add school modal
                showAddSchoolModal() {
                    document.getElementById('modal-title').textContent = 'Add School';
                    document.getElementById('school-form').reset();
                    document.getElementById('form-school-id').value = '';
                    this.editingSchoolId = null;
                    this.openModal('school-modal');
                },

                // Edit school
                editSchool(schoolId) {
                    const school = App.Storage.getSchool(schoolId);
                    if (!school) return;

                    document.getElementById('modal-title').textContent = 'Edit School';
                    document.getElementById('form-school-id').value = school.id;
                    document.getElementById('form-school-name').value = school.schoolName || '';
                    document.getElementById('form-level').value = school.level || '';
                    document.getElementById('form-location').value = school.location || '';
                    document.getElementById('form-conference').value = school.conference || '';
                    document.getElementById('form-head-coach').value = school.headCoach || '';
                    document.getElementById('form-te-coach').value = school.positionCoach || '';
                    document.getElementById('form-recruiting-contact').value = school.recruitingContact || '';
                    document.getElementById('form-phone').value = school.phone || '';
                    document.getElementById('form-email').value = school.email || '';
                    document.getElementById('form-twitter').value = school.twitter || '';
                    document.getElementById('form-interest-our').value = school.ourInterestLevel || 'High';
                    document.getElementById('form-interest-their').value = school.theirInterestLevel || 'Unknown';
                    document.getElementById('form-likelihood').value = school.likelihood || 'Target';
                    document.getElementById('form-offer-status').value = school.offerStatus || 'None';
                    document.getElementById('form-notes').value = school.notes || '';

                    this.editingSchoolId = schoolId;
                    this.openModal('school-modal');
                },

                // Save school
                saveSchool() {
                    const form = document.getElementById('school-form');
                    if (!form.checkValidity()) {
                        form.reportValidity();
                        return;
                    }

                    const schoolData = {
                        id: document.getElementById('form-school-id').value || undefined,
                        schoolName: document.getElementById('form-school-name').value,
                        level: document.getElementById('form-level').value,
                        location: document.getElementById('form-location').value,
                        conference: document.getElementById('form-conference').value,
                        headCoach: document.getElementById('form-head-coach').value,
                        positionCoach: document.getElementById('form-te-coach').value,
                        recruitingContact: document.getElementById('form-recruiting-contact').value,
                        phone: document.getElementById('form-phone').value,
                        email: document.getElementById('form-email').value,
                        twitter: document.getElementById('form-twitter').value,
                        ourInterestLevel: document.getElementById('form-interest-our').value,
                        theirInterestLevel: document.getElementById('form-interest-their').value,
                        likelihood: document.getElementById('form-likelihood').value,
                        offerStatus: document.getElementById('form-offer-status').value,
                        notes: document.getElementById('form-notes').value,

                        // Preserve existing data
                        contactHistory: this.editingSchoolId ?
                            App.Storage.getSchool(this.editingSchoolId).contactHistory : [],
                        actionHistory: this.editingSchoolId ?
                            App.Storage.getSchool(this.editingSchoolId).actionHistory : [],
                        ratings: this.editingSchoolId ?
                            App.Storage.getSchool(this.editingSchoolId).ratings : {
                                coach: 0, programFit: 0, financial: 0, academic: 0, location: 0, overall: 0
                            },
                        aiAnalysis: this.editingSchoolId ?
                            App.Storage.getSchool(this.editingSchoolId).aiAnalysis : null
                    };

                    App.Storage.saveSchool(schoolData);
                    this.closeModal('school-modal');
                    this.renderDashboard();
                },

                // Delete school
                deleteSchool(schoolId) {
                    const school = App.Storage.getSchool(schoolId);
                    if (!school) return;

                    document.getElementById('delete-school-name').textContent = school.schoolName;
                    this.deletingSchoolId = schoolId;
                    this.openModal('delete-modal');
                },

                // Confirm delete
                confirmDelete() {
                    if (this.deletingSchoolId) {
                        App.Storage.deleteSchool(this.deletingSchoolId);
                        this.deletingSchoolId = null;
                        this.closeModal('delete-modal');
                        this.showView('dashboard');
                    }
                },

                // Modal helpers
                openModal(modalId) {
                    document.getElementById(modalId).classList.add('active');
                },

                closeModal(modalId) {
                    document.getElementById(modalId).classList.remove('active');
                }
            },

            // ===== UTILS MODULE =====
            Utils: {
                // Generate UUID v4
                generateUUID() {
                    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
                        const r = Math.random() * 16 | 0;
                        const v = c === 'x' ? r : (r & 0x3 | 0x8);
                        return v.toString(16);
                    });
                },

                // Format date
                formatDate(dateString) {
                    if (!dateString) return '';
                    const date = new Date(dateString);
                    return date.toLocaleDateString('en-US', {
                        year: 'numeric',
                        month: 'short',
                        day: 'numeric'
                    });
                }
            }
        };

        // Initialize app on load
        document.addEventListener('DOMContentLoaded', () => {
            App.Storage.init();
            App.UI.init();
        });
    </script>
</body>
</html>